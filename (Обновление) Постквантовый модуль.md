API Роскосмоса
        data = self.api.fetch_data("orbital-objects")
        
        # Если API не доступно, используем внешние источники
        if not data:
            data = self.data_loader.load_orbital_data()
            
        return data.get("objects", []) if isinstance(data, dict) else data

    def monitor_space_traffic(self) -> Dict:
        """Мониторинг космического трафика"""
        if not self.orbital_data:
            self.orbital_data = self._load_orbital_data()
        
        # Анализ потенциальных столкновений
        critical_objects = []
        for obj in self.orbital_data[:100]:  # Ограничение для демонстрации
            space_obj = SpaceObject(obj)
            if space_obj.is_debris():
                continue
                
            threats = self.threat_analyzer.find_collisions(space_obj)
            if any(t["risk_level"] in ("HIGH", "CRITICAL") for t in threats):
                critical_objects.append({
                    "object": space_obj.name,
                    "threats": [{
                        "id": t["object"].id,
                        "name": t["object"].name,
                        "distance": t["distance"],
                        "risk": t["risk_level"]
                    } for t in threats]
                })
        
        return {
            "timestamp": datetime.now().isoformat(),
            "status": "active",
            "critical_objects": critical_objects,
            "debris_count": sum(1 for obj in self.orbital_data if SpaceObject(obj).is_debris()),
            "total_objects": len(self.orbital_data)
        }

    def analyze_launch_safety(self, launch_params: Dict) -> Dict:
        """Анализ безопасности запуска"""
        return self.launch_analyzer.analyze_launch_window(
            launch_site=launch_params["site"],
            target_orbit=launch_params["orbit"],
            window_start=launch_params["window_start"],
            window_end=launch_params["window_end"]
        )

    def get_iss_threats(self) -> Dict:
        """Получение информации об угрозах для МКС"""
        self.iss_system.update_iss_position()
        iss_data = self.iss_system.get_iss_position()
        
        # Создаем временный объект МКС для анализа
        iss_obj = SpaceObject({
            "NORAD_CAT_ID": "ISS",
            "OBJECT_NAME": "ISS",
            "OBJECT_TYPE": "STATION",
            "EPOCH": datetime.now().isoformat(),
            "ECCENTRICITY": 0.0001,
            "INCLINATION": 51.6,
            "RA_OF_ASC_NODE": 0,
            "ARG_OF_PERICENTER": 0,
            "MEAN_ANOMALY": 0,
            "MEAN_MOTION": 15.5,
            "REV_AT_EPOCH": 0
        })
        
        threats = self.threat_analyzer.find_collisions(iss_obj)
        
        return {
            "iss_position": iss_data,
            "threats": [{
                "id": t["object"].id,
                "name": t["object"].name,
                "distance": t["distance"],
                "risk": t["risk_level"],
                "type": "DEBRIS" if t["object"].is_debris() else "OTHER"
            } for t in threats]
        }

    def plot_space_situation(self, filename: str = "space_situation.png"):
        """Визуализация космической обстановки"""
        if not self.orbital_data:
            self.orbital_data = self._load_orbital_data()
        
        # Создаем карту
        plt.figure(figsize=(16, 8))
        m = Basemap(projection='mill', lon_0=0)
        m.drawcoastlines()
        m.drawparallels(np.arange(-90,90,30), labels=[1,0,0,0])
        m.drawmeridians(np.arange(-180,180,60), labels=[0,0,0,1])
        
        # Визуализация объектов
        for obj in self.orbital_data[:500]:  # Ограничение для производительности
            space_obj = SpaceObject(obj)
            lon, lat, _ = space_obj.calculate_position()
            
            x, y = m(lon, lat)
            if space_obj.is_debris():
                m.plot(x, y, 'ro', markersize=2, alpha=0.3)
            elif "ISS" in space_obj.name:
                m.plot(x, y, 'bo', markersize=10)
            else:
                m.plot(x, y, 'go', markersize=4, alpha=0.5)
        
        plt.title(f"Космическая обстановка ({datetime.now().strftime('%Y-%m-%d %H:%M')})")
        plt.legend(["Мусор", "МКС", "Другие объекты"])
        plt.savefig(filename)
        plt.close()

class UserInterface:
    """Класс для взаимодействия с пользователем"""
    
    @staticmethod
    def prompt_api_credentials() -> RoscosmosAuth:
        """Запрос учетных данных API"""
        print("\n=== Аутентификация в системе Роскосмос ===")
        choice = input("Использовать API ключ? (y/n): ").lower()
        
        if choice == 'y':
            api_key = input("Введите ваш API ключ: ")
            return RoscosmosAuth(api_key=api_key)
        else:
            username = input("Введите логин: ")
            password = input("Введите пароль: ")
            return RoscosmosAuth(username=username, password=password)
    
    @staticmethod
    def display_menu():
        """Отображение главного меню"""
        print("\n=== ГЛАВНОЕ МЕНЮ ===")
        print("1. Мониторинг космического трафика")
        print("2. Анализ безопасности запуска")
        print("3. Мониторинг МКС")
        print("4. Управление спутниками")
        print("5. Визуализация космической обстановки")
        print("6. Выход")
    
    @staticmethod
    def display_threats(threat_data: Dict):
        """Отображение информации об угрозах"""
        print("\n=== КОСМИЧЕСКИЕ УГРОЗЫ ===")
        print(f"Всего объектов на орбите: {threat_data['total_objects']}")
        print(f"Из них космического мусора: {threat_data['debris_count']}")
        
        if threat_data['critical_objects']:
            print("\nКРИТИЧЕСКИЕ СИТУАЦИИ:")
            for obj in threat_data['critical_objects']:
                print(f"\nОбъект: {obj['object']}")
                for threat in obj['threats']:
                    print(f"  Угроза: {threat['name']} (ID: {threat['id']})")
                    print(f"  Дистанция: {threat['distance']:.2f} км")
                    print(f"  Уровень риска: {threat['risk']}")
        else:
            print("\nКритических ситуаций не обнаружено.")

def main():
    """Основная функция для запуска системы"""
    try:
        # Инициализация системы
        auth = UserInterface.prompt_api_credentials()
        security_system = RoscosmosSecuritySystem(auth)
        security_system.initialize()
        
        # Главный цикл
        while True:
            UserInterface.display_menu()
            choice = input("Выберите действие: ")
            
            if choice == '1':
                # Мониторинг космического трафика
                threats = security_system.monitor_space_traffic()
                UserInterface.display_threats(threats)
                input("\nНажмите Enter для продолжения...")
                
            elif choice == '2':
                # Анализ безопасности запуска
                print("\n=== АНАЛИЗ БЕЗОПАСНОСТИ ЗАПУСКА ===")
                launch_params = {
                    "site": input("Космодром (например, Байконур): "),
                    "orbit": {
                        "altitude": float(input("Целевая высота орбиты (км): ")),
                        "inclination": float(input("Наклонение орбиты (град): "))
                    },
                    "window_start": datetime.strptime(
                        input("Начало окна запуска (ГГГГ-ММ-ДД ЧЧ:ММ): "),
                        "%Y-%m-%d %H:%M"
                    ),
                    "window_end": datetime.strptime(
                        input("Конец окна запуска (ГГГГ-ММ-ДД ЧЧ:ММ): "),
                        "%Y-%m-%d %H:%M"
                    )
                }
                
                analysis = security_system.analyze_launch_safety(launch_params)
                print("\nРЕЗУЛЬТАТЫ АНАЛИЗА:")
                print(f"Окно запуска: {analysis['window_start']} - {analysis['window_end']}")
                print(f"Рекомендация: {analysis['recommendation']}")
                
                if analysis['risks']:
                    print("\nПОТЕНЦИАЛЬНЫЕ РИСКИ:")
                    for risk in analysis['risks']:
                        print(f"- {risk['message']} (уровень: {risk['risk_level']})")
                else:
                    print("\nПотенциальные риски не обнаружены.")
                
                input("\nНажмите Enter для продолжения...")
                
            elif choice == '3':
                # Мониторинг МКС
                iss_threats = security_system.get_iss_threats()
                pos = iss_threats['iss_position']
                print("\n=== МОНИТОРИНГ МКС ===")
                print(f"Текущее положение: {pos.get('latitude', 'N/A')}° с.ш., {pos.get('longitude', 'N/A')}° в.д.")
                print(f"Высота: {pos.get('altitude', 'N/A')} км")
                print(f"Скорость: {pos.get('velocity', 'N/A')} км/ч")
                
                if iss_threats['threats']:
                    print("\nПОТЕНЦИАЛЬНЫЕ УГРОЗЫ:")
                    for threat in iss_threats['threats']:
                        print(f"- {threat['name']} (ID: {threat['id']})")
                        print(f"  Дистанция: {threat['distance']:.2f} км")
                        print(f"  Уровень риска: {threat['risk']}")
                else:
                    print("\nПотенциальные угрозы не обнаружены.")
                
                input("\nНажмите Enter для продолжения...")
                
            elif choice == '4':
                # Управление спутниками
                print("\n=== УПРАВЛЕНИЕ СПУТНИКАМИ ===")
                sat_id = input("Введите ID спутника: ")
                status = security_system.satellite_system.get_satellite_status(sat_id)
                
                if status:
                    print(f"\nСтатус спутника {sat_id}:")
                    print(f"Имя: {status.get('name', 'N/A')}")
                    print(f"Статус: {status.get('status', 'N/A')}")
                    print(f"Орбита: {status.get('orbit', {}).get('type', 'N/A')}")
                    
                    # Меню команд
                    print("\nДоступные команды:")
                    print("1. Запросить телеметрию")
                    print("2. Изменить ориентацию")
                    print("3. Активировать резервную систему")
                    cmd_choice = input("Выберите команду (или Enter для отмены): ")
                    
                    if cmd_choice == '1':
                        result = security_system.satellite_system.send_command(
                            sat_id, "request_telemetry"
                        )
                        print(f"Результат: {result.get('message', 'Команда отправлена')}")
                    elif cmd_choice == '2':
                        params = {
                            "axis": input("Ось (x/y/z): "),
                            "angle": float(input("Угол (град): "))
                        }
                        result = security_system.satellite_system.send_command(
                            sat_id, "adjust_orientation", params
                        )
                        print(f"Результат: {result.get('message', 'Команда отправлена')}")
                    elif cmd_choice == '3':
                        result = security_system.satellite_system.send_command(
                            sat_id, "activate_backup"
                        )
                        print(f"Результат: {result.get('message', 'Команда отправлена')}")
                else:
                    print("Спутник не найден.")
                
                input("\nНажмите Enter для продолжения...")
                
            elif choice == '5':
                # Визуализация космической обстановки
                print("\nГенерация визуализации...")
                security_system.plot_space_situation()
                print("Визуализация сохранена в файл space_situation.png")
                input("\nНажмите Enter для продолжения...")
                
            elif choice == '6':
                print("Завершение работы системы.")
                break
                
            else:
                print("Неверный выбор. Попробуйте снова.")
    
    except Exception as e:
        print(f"\nОШИБКА: {str(e)}")
        print("Система завершает работу.")
        sys.exit(1)

if __name__ == "__main__":
    main()
```

## Дополнение к модулю "Роскосмос: Безопасность космической деятельности"

### Основные компоненты системы:

1. **Аутентификация и API**:
   - Поддержка ввода API-ключей или логина/пароля
   - Класс `RoscosmosAuth` для управления учетными данными
   - Класс `RoscosmosAPI` для взаимодействия с API Роскосмоса

2. **Мониторинг космического пространства**:
   - Загрузка данных о космических объектах из API и внешних источников
   - Класс `SpaceObject` для представления объектов на орбите
   - Анализатор угроз (`ThreatAnalyzer`) для выявления опасных сближений

3. **Безопасность запусков**:
   - Анализ оптимальных окон запуска
   - Оценка рисков столкновений с другими объектами
   - Класс `LaunchAnalyzer` для комплексной проверки параметров запуска

4. **Мониторинг МКС**:
   - Отслеживание текущего положения станции
   - Анализ угроз для МКС
   - Расчет времени видимости с наземных станций

5. **Управление спутниками**:
   - Получение статуса спутников
   - Отправка команд на спутники
   - Мониторинг состояния систем

6. **Космический мусор**:
   - Загрузка данных о мусоре из внешних источников
   - Визуализация распределения мусора на орбите
   - Оценка рисков от космического мусора

7. **Визуализация**:
   - Построение карт космической обстановки
   - Генерация графиков и диаграмм
   - Использование библиотеки Basemap для визуализации на глобусе

8. **Пользовательский интерфейс**:
   - Консольное меню для взаимодействия с системой
   - Удобный вывод информации об угрозах
   - Возможность ручного ввода параметров для анализа

### Особенности реализации:

1. **Гибкая аутентификация**:
   - Поддержка как API-ключей, так и логина/пароля
   - Автоматическое обновление токенов доступа

2. **Резервные источники данных**:
   - При недоступности API Роскосмоса система автоматически переключается на внешние источники
   - Поддержка Celestrak и других открытых источников данных

3. **Модульная архитектура**:
   - Каждый компонент системы может работать независимо
   - Легкость добавления новых функциональных модулей

4. **Безопасность**:
   - Все передаваемые данные защищены токенами доступа
   - Конфиденциальная информация (пароли, ключи) не сохраняется в открытом виде

5. **Визуализация**:
   - Генерация понятных графических отчетов
   - Возможность сохранения результатов анализа в файлы

### Примеры использования:

1. **Мониторинг угроз**:
   ```python
   security_system = RoscosmosSecuritySystem(auth)
   security_system.initialize()
   threats = security_system.monitor_space_traffic()
   ```

2. **Анализ запуска**:
   ```python
   launch_params = {
       "site": "Байконур",
       "orbit": {"altitude": 400, "inclination": 51.6},
       "window_start": datetime.now(),
       "window_end": datetime.now() + timedelta(hours=2)
   }
   analysis = security_system.analyze_launch_safety(launch_params)
   ```

3. **Управление спутником**:
   ```python
   satellite_system = SatelliteSystem(api)
   status = satellite_system.get_satellite_status("GLONASS-123")
   result = satellite_system.send_command("GLONASS-123", "adjust_orientation", {"axis": "x", "angle": 5})
   ```

Система предоставляет комплексное решение для обеспечения безопасности космической деятельности, сочетая данные Р
